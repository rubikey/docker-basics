services:
  proxy:
    image: 'jc21/nginx-proxy-manager:latest'
    container_name: proxy-manager
    restart: unless-stopped
    ports:
      - '80:80' # Standard HTTP
      - '81:81' # Administration Proxy Manager Panel
      - '443:443' # HTTPS
    volumes:
      - ./data:/data
      - ./letsencrypt:/etc/letsencrypt


  app-web:
    build: .          # Dockerfile Path
    container_name: web-server
    restart: always
    volumes:
      - ./index.html:/usr/share/nginx/html/index.html
    

  
  db:
    image: mariadb:11.4.9
    container_name: db-server
    restart: always
    environment:
      MARIADB_ROOT_PASSWORD: password123
      MARIADB_DATABASE: app_users
    volumes: 
      - mysql-data:/var/lib/mysql
 

  dozzle:
    image: amir20/dozzle:latest
    container_name: utils-dozzle
    restart: unless-stopped
    volumes:
     - /var/run/docker.sock:/var/run/docker.sock:ro # Allow to read all container logs 

    ports:
     - 8888:8080

volumes:
 mysql-data:
